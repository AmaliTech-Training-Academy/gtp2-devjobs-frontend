<form [formGroup]="form" (ngSubmit)="onSubmit()" class="auth-form">
  <!-- Job Seeker Fields -->
  <ng-container *ngIf="isRegister && userType === 'seeker'">
    <div class="form-group">
      <label class="form-label">Full name</label>
      <mat-form-field appearance="outline" class="full-width">
        <input
          matInput
          formControlName="name"
          placeholder="Enter your full name"
          required
        />
        <mat-icon matPrefix
          ><img src="./assets/icons/name.png" alt="name-icon" />
        </mat-icon>
        <mat-error
          *ngIf="form.get('name')?.invalid && form.get('name')?.touched"
        >
          Full name is required
        </mat-error>
      </mat-form-field>
    </div>

    <div class="form-group">
      <label class="form-label">Username</label>
      <mat-form-field appearance="outline" class="full-width">
        <input
          matInput
          formControlName="username"
          placeholder="Enter your username"
          required
        />
        <mat-icon matPrefix
          ><img src="./assets/icons/username.png" alt="username-icon"
        /></mat-icon>
        <mat-error
          *ngIf="form.get('username')?.invalid && form.get('username')?.touched"
        >
          Username is required
        </mat-error>
      </mat-form-field>
    </div>

    <div class="form-group">
      <label class="form-label">Email address</label>
      <mat-form-field appearance="outline" class="full-width">
        <input
          matInput
          formControlName="email"
          placeholder="Enter your email"
          required
        />
        <mat-icon matPrefix
          ><img src="./assets/icons/email.png" alt="email"
        /></mat-icon>
        <mat-error
          *ngIf="form.get('email')?.invalid && form.get('email')?.touched"
        >
          Please enter a valid email address
        </mat-error>
      </mat-form-field>
    </div>
  </ng-container>

  <!-- Employer Fields -->
  <ng-container *ngIf="isRegister && userType === 'employer'">
    <div class="form-group">
      <label class="form-label">Company name</label>
      <mat-form-field appearance="outline" class="full-width">
        <input
          matInput
          formControlName="companyName"
          placeholder="Enter your company name"
          required
        />
        <mat-icon matPrefix
          ><img src="./assets/icons/name.png" alt="name-icon"
        /></mat-icon>
        <mat-error
          *ngIf="
            form.get('companyName')?.invalid && form.get('companyName')?.touched
          "
        >
          Company name is required
        </mat-error>
      </mat-form-field>
    </div>

    <div class="form-group">
      <label class="form-label">Username</label>
      <mat-form-field appearance="outline" class="full-width">
        <input
          matInput
          formControlName="username"
          placeholder="Enter your username"
          required
        />
        <mat-icon matPrefix
          ><img src="./assets/icons/username.png" alt="username-icon"
        /></mat-icon>
        <mat-error
          *ngIf="form.get('username')?.invalid && form.get('username')?.touched"
        >
          Username is required
        </mat-error>
      </mat-form-field>
    </div>

    <div class="form-group">
      <label class="form-label">Company email address</label>
      <mat-form-field appearance="outline" class="full-width">
        <input
          matInput
          formControlName="companyEmail"
          placeholder="Enter your company email"
          required
        />
        <mat-icon matPrefix
          ><img src="./assets/icons/email.png" alt="email"
        /></mat-icon>
        <mat-error
          *ngIf="
            form.get('companyEmail')?.invalid &&
            form.get('companyEmail')?.touched
          "
        >
          Please enter a valid company email address
        </mat-error>
      </mat-form-field>
    </div>
  </ng-container>

  <!-- Login Fields (when not in register mode) -->
  <ng-container *ngIf="!isRegister">
    <div class="form-group">
      <label class="form-label">Email address or username</label>
      <mat-form-field appearance="outline" class="full-width">
        <input
          matInput
          formControlName="email"
          placeholder="Enter your email"
          required
        />
        <mat-icon matPrefix
          ><img src="./assets/icons/email.png" alt="email"
        /></mat-icon>
        <mat-error
          *ngIf="form.get('email')?.invalid && form.get('email')?.touched"
        >
          Please enter a valid email address or username
        </mat-error>
      </mat-form-field>
    </div>
  </ng-container>

  <!-- Password Field (shared) -->
  <div class="form-group">
    <label class="form-label">Password</label>
    <mat-form-field appearance="outline" class="full-width">
      <input
        matInput
        [type]="hide ? 'password' : 'text'"
        formControlName="password"
        placeholder="Enter your password"
        required
      />

      <button mat-icon-button matSuffix (click)="hide = !hide" type="button">
        <mat-icon>{{ hide ? "visibility_off" : "visibility" }}</mat-icon>
      </button>
      <mat-error
        *ngIf="form.get('password')?.invalid && form.get('password')?.touched"
      >
        Password must be at least 6 characters
      </mat-error>
    </mat-form-field>

    <!-- Remember Me and Forgot Password -->
    <div class="remember-forgot" *ngIf="!isRegister">
      <mat-checkbox formControlName="rememberMe" color="primary">
        Remember me
      </mat-checkbox>

      <a (click)="goToForgotPassword()" class="forgot-password-link">
        Forgot password?
      </a>
    </div>
  </div>

  <!-- Submit Button -->
  <button
    mat-raised-button
    color="primary"
    class="full-width"
    type="submit"
    [disabled]="form.invalid"
  >
    {{ isRegister ? "Sign up" : "Login" }}
  </button>
</form>
